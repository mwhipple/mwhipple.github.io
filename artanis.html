<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-07-28 Fri 15:16 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Artanis</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="./index.html"> HOME </a>
</div><div id="content" class="content">
<h1 class="title">Artanis</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgfe6f606">1. Containerized Execution</a></li>
<li><a href="#org7cd7cd7">2. Details</a></li>
</ul>
</div>
</div>
<p>
This site was originally looking to be running on top of <a href="sources.html#gnuartanis">GNU
Artanis</a>. This was fairly quickly abandoned in favor of nginx as
Artanis seems like to be overkill for what is likely to be more of a
Web site than a Web application (this was predicted as mentioned
below but was done sooner than expected). This information is therefore
historical.
</p>

<p>
This is largely a consequence of the approach to Information
Collection, although the project may potentially align with some
longer term goals. I'm more likely to ultimately land on a solution
that is more closely aligned with a static Web site/<a href="sources.html#jamstack">Jamstack</a>, but I
think I also want the site to have some basic support for concepts
such as content negotiation which many static solutions don't lend
themselves naturally to and therefore I'll probably ultimately move to
something like nginx (which is also recommended in front of Artanis
but I haven't navigated my way over there yet). I enjoy Scheme but am
likely to gravitate more towards Python, I'll elaborate upon some of
my larger thoughts around languages in an upcoming update.
</p>

<p>
Relatively up-to-date information on Artanis seems to be provided on
its <a href="sources.html#src-artanis_github">GitLab page</a> (including containerized execution which I'll be
looking to build on top of). Artanis itself is built on top of <a href="sources.html#src-gnuguile">GNU
Guile</a> which was installed but not detected on my system (it is
potentially outdated), so I may also dig into that project though I'll
likely start with seeing about containerized Artanis.
</p>

<div id="outline-container-orgfe6f606" class="outline-2">
<h2 id="orgfe6f606"><span class="section-number-2">1.</span> Containerized Execution</h2>
<div class="outline-text-2" id="text-1">
<p>
I'll be looking to run Artanis in a container, and accordingly the
initially desired development environment is also using containers to
most closely align with the deployment (installing anything on my host
is effectively more of a workflow optimization). There are <a href="sources.html#src-nalaginrut-artanis-docker">some
instructions</a> provided for running Artanis in a container, but those
instructions need to be tuned a bit. Most significantly the tag for
the image is outdated and should instead be more of the form
`registry.gitlab.com/hardenedlinux/artanis` to reflect the project
being transferred. Updated guidance is provided with the <a href="sources.html#src-nalaginrut-artanis_0.5_docker">instructions
for Artanis 0.5</a>. Beyond that there are a few adjustments for the
sake of usability and reproducibility: the image should have an
appropriate entrypoint so that it can be launched directly and an
ostensibly immutable tag should be used (where the latter concern
transcends the scope of the blog post). The entrypoint decision is
somewhat a matter of preference or perspective where the instructions
seem to be more oriented towards using the container to provide an
interactive contained environment which takes care of dependencies
whereas my preference would be more of a directly invokable utility
container which is more targeted towards providing a service to the
host (where the entrypoint can always be overridden if needed). I'll
therefore likely create an image for local development which adjusts
the entrypoint whereas I'd typically look to just use the upstream
image for that purpose (along with expected tweaks to the command.
There's also a decent chance the image could be slimmed down a bit if
it's not expected to be interactive, but it doesn't seem <span class="underline">overly</span>
large given the use case and so that feels like premature optimization
for the time being (it seems unnecessarily large given the
functionality for a deployment that is expected to scale but I
presently have no reason to think this site fits that criterion).  The
standard upstream image also seems to fall into a fairly common trap
of using root rather than a less-privileged user. I think this is
covered as part of Dockerfile best practices that I'll need to chase
down. Another fairly general note is that the guidance on the post
suggests using <a href="sources.html#src-docker-get">docker</a> but I'd probably gravitate towards an
alternative like <code>nerdctl</code>. This is relatively insignificant as it can
be abstracted by the Makefile but seems worth mentioning given the
strong sentiment in the Artanis documentation and the GNU community as
a whole towards free software against which the licensing for Docker
Desktop <span class="underline">may</span> run afoul.
</p>
</div>
</div>

<div id="outline-container-org7cd7cd7" class="outline-2">
<h2 id="org7cd7cd7"><span class="section-number-2">2.</span> Details</h2>
<div class="outline-text-2" id="text-2">
<p>
My starting point is to use the provided image and access a locally
running site&#x2026;unfortunately some of my quick tweaks didn't quite land
so I'll need to quickly retrieve specifics from the <a href="sources.html#docker-reference">Docker reference
documentation</a> since I typically can remember what options there are
but not quite how they look. While I (as mentioned) am looking to move
away from Docker it has good documentation and remains the de facto
standard at the moment so starting with what is documented for Docker
is certainly a safe point while pursuing what is currently
Docker-compatible invocations.  To get the ball rolling I just fiddled
with the command to get it to work, but I'll adjust them based on the
<a href="sources.html#docker-run">docker run documentation</a> and replace the short options with the longer
forms.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2023-07-28 Fri 15:16</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>